Index: buildroot/package/gpm/Config.in
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ buildroot/package/gpm/Config.in	2009-09-25 14:03:49.000000000 +0200
@@ -0,0 +1,7 @@
+config BR2_PACKAGE_GPM
+	bool "gpm mouse server"
+	help
+	  gpm means general purpose mouse and is the mouse support for Linux
+	  in the console.
+
+	  http://unix.schottelius.org/gpm/
Index: buildroot/package/gpm/gpm.mk
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ buildroot/package/gpm/gpm.mk	2009-09-25 14:03:49.000000000 +0200
@@ -0,0 +1,11 @@
+#############################################################
+#
+# General Purpose Mouse server for Linux console.
+#
+#############################################################
+
+GPM_VERSION:=1.20.6
+GPM_SOURCE:=gpm-$(GPM_VERSION).tar.bz2
+GPM_SITE:=http://unix.schottelius.org/gpm/archives/
+
+$(eval $(call AUTOTARGETS,package,gpm))
Index: buildroot/package/gpm/gpm-1.20.6-removes_obsolete_functions.patch
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ buildroot/package/gpm/gpm-1.20.6-removes_obsolete_functions.patch	2009-09-25 14:03:49.000000000 +0200
@@ -0,0 +1,79 @@
+
+Removes all "obsolete" functions (at least to compile for uClibc).
+
+Signed-off-by: Julien Boibessot <julien.boibessot@armadeus.com>
+
+diff -urN gpm-1.20.6/src/daemon/old_main.c gpm-1.20.6.mod/src/daemon/old_main.c
+--- gpm-1.20.6/src/daemon/old_main.c	2009-02-09 10:58:53.000000000 +0100
++++ gpm-1.20.6.mod/src/daemon/old_main.c	2009-09-25 10:27:54.000000000 +0200
+@@ -85,7 +85,7 @@
+    /* control node */
+ 
+    if((ctlfd=socket(AF_UNIX,SOCK_STREAM,0))==-1) gpm_report(GPM_PR_OOPS,GPM_MESS_SOCKET_PROB);
+-   bzero((char *)&ctladdr,sizeof(ctladdr));
++   memset((char *)&ctladdr, 0, sizeof(ctladdr));
+    ctladdr.sun_family=AF_UNIX;
+    strcpy(ctladdr.sun_path,GPM_NODE_CTL);
+    unlink(GPM_NODE_CTL);
+diff -urN gpm-1.20.6/src/daemon/open_console.c gpm-1.20.6.mod/src/daemon/open_console.c
+--- gpm-1.20.6/src/daemon/open_console.c	2009-02-09 10:58:53.000000000 +0100
++++ gpm-1.20.6.mod/src/daemon/open_console.c	2009-09-25 10:33:02.000000000 +0200
+@@ -21,7 +21,9 @@
+ 
+ #include <fcntl.h>                  /* open and co.      */
+ #include <sys/stat.h>               /* stat()            */
+-#include <stropts.h>                /* ioctl             */
++#if !(defined(__linux__))
++# include <stropts.h>                /* ioctl             */
++#endif
+ 
+ /* Linux specific (to be outsourced in gpm2 */
+ #include <linux/serial.h>           /* for serial console check */
+diff -urN gpm-1.20.6/src/daemon/processconn.c gpm-1.20.6.mod/src/daemon/processconn.c
+--- gpm-1.20.6/src/daemon/processconn.c	2009-02-09 10:58:53.000000000 +0100
++++ gpm-1.20.6.mod/src/daemon/processconn.c	2009-09-25 10:27:26.000000000 +0200
+@@ -45,7 +45,7 @@
+ 
+ /*....................................... Accept */
+ 
+-   bzero((char *) &addr, sizeof(addr));
++   memset((char *) &addr, 0, sizeof(addr));
+    addr.sun_family = AF_UNIX;
+ 
+    len = sizeof(addr);
+diff -urN gpm-1.20.6/src/lib/liblow.c gpm-1.20.6.mod/src/lib/liblow.c
+--- gpm-1.20.6/src/lib/liblow.c	2009-02-09 10:58:53.000000000 +0100
++++ gpm-1.20.6.mod/src/lib/liblow.c	2009-09-25 10:28:28.000000000 +0200
+@@ -290,7 +290,7 @@
+       }
+ 
+ #ifndef SO_PEERCRED
+-      bzero((char *)&addr,sizeof(addr));
++      memset((char *)&addr, 0, sizeof(addr));
+       addr.sun_family=AF_UNIX;
+       if (!(sock_name = tempnam (0, "gpm"))) {
+          gpm_report(GPM_PR_ERR,GPM_MESS_TEMPNAM,strerror(errno));
+@@ -304,7 +304,7 @@
+       }
+ #endif
+ 
+-      bzero((char *)&addr,sizeof(addr));
++      memset((char *)&addr, 0, sizeof(addr));
+       addr.sun_family=AF_UNIX;
+       strcpy(addr.sun_path, GPM_NODE_CTL);
+       i=sizeof(addr.sun_family)+strlen(GPM_NODE_CTL);
+diff -urN gpm-1.20.6/src/synaptics.c gpm-1.20.6.mod/src/synaptics.c
+--- gpm-1.20.6/src/synaptics.c	2009-02-09 10:58:53.000000000 +0100
++++ gpm-1.20.6.mod/src/synaptics.c	2009-09-25 10:36:01.000000000 +0200
+@@ -2134,9 +2134,9 @@
+ 	      break;
+ 
+ 	    case Flag_Param:
+-	      if (index ("YyTt1", token [0])) {
++	      if (strchr ("YyTt1", token [0])) {
+ 		*(param_data [param].addr.flag_p) = 1;
+-	      } else if (index ("NnFf0", token [0])) {
++	      } else if (strchr ("NnFf0", token [0])) {
+ 		*(param_data [param].addr.flag_p) = 0;
+ 	      } else {
+ 		gpm_report (GPM_PR_WARN,"Flag value (%s) for parameter %s is invalid",
Index: buildroot/package/Config.in
===================================================================
--- buildroot.orig/package/Config.in	2009-09-25 14:05:19.000000000 +0200
+++ buildroot/package/Config.in	2009-09-25 14:06:07.000000000 +0200
@@ -267,6 +267,7 @@
 source "package/fpgaregs/Config.in"
 source "package/fuse/Config.in"
 source "package/gadgetfs-test/Config.in"
+source "package/gpm/Config.in"
 source "package/hal/Config.in"
 if !BR2_PACKAGE_BUSYBOX_HIDE_OTHERS
 source "package/hdparm/Config.in"
