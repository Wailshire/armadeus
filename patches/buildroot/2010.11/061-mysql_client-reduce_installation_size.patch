Help to reduce size of mysql client installation by adding an option to remove
unneeded stuff for most everyday use.

Signed-off-by: Fabien Marteau <fabien.marteau@armadeus.com>

Index: buildroot/package/mysql_client/Config.in
===================================================================
--- buildroot.orig/package/mysql_client/Config.in	2010-11-30 16:52:43.000000000 +0100
+++ buildroot/package/mysql_client/Config.in	2011-02-08 14:30:03.000000000 +0100
@@ -8,3 +8,20 @@
 
 comment "Mysql client requires a toolchain with C++ support enabled"
 	depends on !BR2_INSTALL_LIBSTDCPP
+
+
+if BR2_PACKAGE_MYSQL_CLIENT
+config BR2_PACKAGE_MYSQL_CLIENT_SHRINK
+	bool "MySQL client shrink"
+	help
+	  Reduce the size of MySQL package by suppressing:
+	  usr/bin/mysql_client_test
+	  usr/bin/mysql_waitpid
+	  usr/bin/myisampack
+	  usr/bin/mysqldump
+	  usr/bin/mysqltest
+	  usr/bin/myisamchk
+	  usr/bin/myisam_ftdump
+	  usr/bin/myisamlog
+	  usr/bin/my_print_defaults
+endif
Index: buildroot/package/mysql_client/mysql_client.mk
===================================================================
--- buildroot.orig/package/mysql_client/mysql_client.mk	2010-11-30 16:52:43.000000000 +0100
+++ buildroot/package/mysql_client/mysql_client.mk	2011-02-08 15:15:57.000000000 +0100
@@ -32,10 +32,31 @@
 	--enable-thread-safe-client \
 	$(ENABLE_DEBUG)
 
-define MYSQL_CLIENT_REMOVE_TEST_PROGS
+define MYSQL_CLIENT_DELETE_USELESS_BINARIES
 	rm -rf $(TARGET_DIR)/usr/mysql-test $(TARGET_DIR)/usr/sql-bench
 endef
 
-MYSQL_CLIENT_POST_INSTALL_TARGET_HOOKS += MYSQL_CLIENT_REMOVE_TEST_PROGS
+define MYSQL_CLIENT_MOVE_BINARIES_IN_USRLIB
+	mv $(TARGET_DIR)/usr/lib/mysql/* $(TARGET_DIR)/usr/lib/
+	rm -r $(TARGET_DIR)/usr/lib/mysql
+endef
+
+define MYSQL_CLIENT_DELETE_USELESS_BINARIES_SHRINK
+	rm -rf $(TARGET_DIR)/usr/bin/mysql_client_test
+	rm -rf $(TARGET_DIR)/usr/bin/mysql_waitpid
+	rm -rf $(TARGET_DIR)/usr/bin/myisampack
+	rm -rf $(TARGET_DIR)/usr/bin/mysqldump
+	rm -rf $(TARGET_DIR)/usr/bin/mysqltest
+	rm -rf $(TARGET_DIR)/usr/bin/myisamchk
+	rm -rf $(TARGET_DIR)/usr/bin/myisam_ftdump
+	rm -rf $(TARGET_DIR)/usr/bin/myisamlog
+	rm -rf $(TARGET_DIR)/usr/bin/my_print_defaults
+endef
+
+MYSQL_CLIENT_POST_INSTALL_TARGET_HOOKS += MYSQL_CLIENT_DELETE_USELESS_BINARIES
+MYSQL_CLIENT_POST_INSTALL_TARGET_HOOKS += MYSQL_CLIENT_MOVE_BINARIES_IN_USRLIB
+ifeq ($(BR2_PACKAGE_MYSQL_CLIENT_SHRINK),y)
+MYSQL_CLIENT_POST_INSTALL_TARGET_HOOKS += MYSQL_CLIENT_DELETE_USELESS_BINARIES_SHRINK
+endif
 
 $(eval $(call AUTOTARGETS,package,mysql_client))
