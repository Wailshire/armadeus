Add the possibility to build & install the Qt's demos and examples.
This patch is still to be evolved toward Qt full integration in Buildroot.

Signed-off-by: Jérémie Scheer <jeremie.scheer@armadeus.com>

Index: buildroot/package/qt/Config.in
===================================================================
--- buildroot.orig/package/qt/Config.in	2010-05-30 22:24:10.000000000 +0200
+++ buildroot/package/qt/Config.in	2010-10-06 15:16:56.000000000 +0200
@@ -372,4 +372,14 @@
 	  Build the Qt Script Tools module.
 	  if unsure, say n.
 
+config BR2_PACKAGE_QT_DEMOS
+	bool "Demos"
+	help
+	  Build the Qt Demos.
+
+config BR2_PACKAGE_QT_EXAMPLES
+	bool "Examples"
+	help
+	  Build the Qt Examples.
+
 endif # BR2_PACKAGE_QT
Index: buildroot/package/qt/qt.mk
===================================================================
--- buildroot.orig/package/qt/qt.mk	2010-05-30 22:24:10.000000000 +0200
+++ buildroot/package/qt/qt.mk	2010-10-06 15:25:30.000000000 +0200
@@ -362,6 +362,14 @@
 QT_CONFIGURE+= -no-stl
 endif
 
+ifneq ($(BR2_PACKAGE_QT_DEMOS),y)
+QT_CONFIGURE+= -nomake demos
+endif
+
+ifneq ($(BR2_PACKAGE_QT_EXAMPLES),y)
+QT_CONFIGURE+= -nomake examples
+endif
+
 # ccache and precompiled headers don't play well together
 ifeq ($(BR2_CCACHE),y)
 QT_CONFIGURE += -no-pch
@@ -507,11 +515,11 @@
 		-no-accessibility \
 		-no-separate-debug-info \
 		-prefix /usr \
+		-examplesdir $(STAGING_DIR)/usr/local/Trolltech/QtEmbedded-4.6.2-arm/demos \
+		-demosdir $(STAGING_DIR)/usr/local/Trolltech/QtEmbedded-4.6.2-arm/examples \
 		-hostprefix $(STAGING_DIR)/usr \
 		-fast \
 		-no-rpath \
-		-nomake examples \
-		-nomake demos \
 	)
 	touch $@
 
@@ -589,8 +597,15 @@
 	cp -dpf $(STAGING_DIR)/usr/lib/libQtScriptTools.so.* $(TARGET_DIR)/usr/lib/
 endif
 
+demos: $(STAGING_DIR)/usr/lib/libQtCore.la
+	mkdir -p $(TARGET_DIR)/usr/local/Trolltech/QtEmbedded-4.6.2-arm/demos
+	cp -dpfR $(STAGING_DIR)/usr/local/Trolltech/QtEmbedded-4.6.2-arm/demos/* $(TARGET_DIR)/usr/local/Trolltech/QtEmbedded-4.6.2-arm/demos/
+
+examples: $(STAGING_DIR)/usr/lib/libQtCore.la
+	mkdir -p $(TARGET_DIR)/usr/local/Trolltech/QtEmbedded-4.6.2-arm/examples
+	cp -dpfR $(STAGING_DIR)/usr/local/Trolltech/QtEmbedded-4.6.2-arm/examples/* $(TARGET_DIR)/usr/local/Trolltech/QtEmbedded-4.6.2-arm/examples/
 
-$(TARGET_DIR)/usr/lib/libQtCore.so.4: $(STAGING_DIR)/usr/lib/libQtCore.la $(QT_LIBS)
+$(TARGET_DIR)/usr/lib/libQtCore.so.4: $(STAGING_DIR)/usr/lib/libQtCore.la $(QT_LIBS) demos examples
 	# Strip all installed libs
 ifeq ($(BR2_PACKAGE_QT_SHARED),y)
 	cp -dpf $(STAGING_DIR)/usr/lib/libQtCore.so.* $(TARGET_DIR)/usr/lib/
