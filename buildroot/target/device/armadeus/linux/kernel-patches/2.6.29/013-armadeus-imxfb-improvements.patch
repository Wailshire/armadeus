PATCH AUTOMATICALLY GENERATED
DON'T EDIT IT OR YOUR MODIFICATIONS WILL BE LOST
(Take a look at armadeus/target/linux/ directory to know how to generate it)
Index: linux-2.6.29/drivers/video/imxfb.c
===================================================================
--- linux-2.6.29.orig/drivers/video/imxfb.c	2009-03-24 00:12:14.000000000 +0100
+++ linux-2.6.29/drivers/video/imxfb.c	2009-04-29 15:15:10.000000000 +0200
@@ -437,6 +437,7 @@
 	pr_debug("var: yres=%d vslen=%d um=%d bm=%d\n",
 		var->yres, var->vsync_len,
 		var->upper_margin, var->lower_margin);
+	pr_debug("var: bpp=%d\n", var->bits_per_pixel);
 
 #if DEBUG_VAR
 	if (var->xres < 16        || var->xres > 1024)
@@ -661,6 +662,12 @@
 		goto failed_cmap;
 
 	imxfb_set_par(info);
+	/* JB: The following parameters are only needed once at startup and so
+		removed from from imxfb_set_par()/imxfb_activate_var() */
+	writel(fbi->pwmr, fbi->regs + LCDC_PWMR);
+	writel(fbi->lscr1, fbi->regs + LCDC_LSCR1);
+	writel(fbi->dmacr, fbi->regs + LCDC_DMACR);
+
 	ret = register_framebuffer(info);
 	if (ret < 0) {
 		dev_err(&pdev->dev, "failed to register framebuffer\n");
