--- ref/linux-2.6.23.1/arch/arm/configs/apf9328_defconfig	1970-01-01 01:00:00.000000000 +0100
+++ linux-2.6.23.1/arch/arm/configs/apf9328_defconfig	2006-10-07 20:09:07.000000000 +0200
@@ -0,0 +1,805 @@
+#
+# Automatically generated make config: don't edit
+# Linux kernel version: 2.6.10-imx1
+# Fri Dec 16 23:27:52 2005
+#
+CONFIG_ARM=y
+CONFIG_MMU=y
+CONFIG_UID16=y
+CONFIG_RWSEM_GENERIC_SPINLOCK=y
+CONFIG_GENERIC_CALIBRATE_DELAY=y
+CONFIG_GENERIC_IOMAP=y
+
+#
+# Code maturity level options
+#
+CONFIG_EXPERIMENTAL=y
+CONFIG_CLEAN_COMPILE=y
+CONFIG_BROKEN_ON_SMP=y
+CONFIG_LOCK_KERNEL=y
+CONFIG_INIT_ENV_ARG_LIMIT=32
+
+#
+# General setup
+#
+CONFIG_LOCALVERSION=""
+CONFIG_SWAP=y
+CONFIG_SYSVIPC=y
+# CONFIG_POSIX_MQUEUE is not set
+# CONFIG_BSD_PROCESS_ACCT is not set
+# CONFIG_SYSCTL is not set
+# CONFIG_AUDIT is not set
+# CONFIG_HOTPLUG is not set
+CONFIG_KOBJECT_UEVENT=y
+CONFIG_IKCONFIG=y
+CONFIG_IKCONFIG_PROC=y
+CONFIG_EMBEDDED=y
+# CONFIG_KALLSYMS is not set
+CONFIG_PRINTK=y
+CONFIG_BUG=y
+CONFIG_BASE_FULL=y
+CONFIG_FUTEX=y
+CONFIG_EPOLL=y
+CONFIG_CC_OPTIMIZE_FOR_SIZE=y
+CONFIG_SHMEM=y
+CONFIG_CC_ALIGN_FUNCTIONS=0
+CONFIG_CC_ALIGN_LABELS=0
+CONFIG_CC_ALIGN_LOOPS=0
+CONFIG_CC_ALIGN_JUMPS=0
+# CONFIG_TINY_SHMEM is not set
+CONFIG_BASE_SMALL=0
+
+#
+# Loadable module support
+#
+CONFIG_MODULES=y
+CONFIG_MODULE_UNLOAD=y
+# CONFIG_MODULE_FORCE_UNLOAD is not set
+CONFIG_OBSOLETE_MODPARM=y
+# CONFIG_MODVERSIONS is not set
+# CONFIG_MODULE_SRCVERSION_ALL is not set
+CONFIG_KMOD=y
+
+#
+# System Type
+#
+# CONFIG_ARCH_CLPS7500 is not set
+# CONFIG_ARCH_CLPS711X is not set
+# CONFIG_ARCH_CO285 is not set
+# CONFIG_ARCH_EBSA110 is not set
+# CONFIG_ARCH_CAMELOT is not set
+# CONFIG_ARCH_FOOTBRIDGE is not set
+# CONFIG_ARCH_INTEGRATOR is not set
+# CONFIG_ARCH_IOP3XX is not set
+# CONFIG_ARCH_IXP4XX is not set
+# CONFIG_ARCH_IXP2000 is not set
+# CONFIG_ARCH_L7200 is not set
+# CONFIG_ARCH_PXA is not set
+# CONFIG_ARCH_RPC is not set
+# CONFIG_ARCH_SA1100 is not set
+# CONFIG_ARCH_S3C2410 is not set
+# CONFIG_ARCH_SHARK is not set
+# CONFIG_ARCH_LH7A40X is not set
+# CONFIG_ARCH_OMAP is not set
+# CONFIG_ARCH_VERSATILE is not set
+CONFIG_ARCH_IMX=y
+# CONFIG_ARCH_H720X is not set
+
+#
+# IMX Implementations
+#
+# CONFIG_MACH_MX1FS2 is not set
+# CONFIG_MACH_SCB9328 is not set
+CONFIG_MACH_APF9328=y
+# CONFIG_ARCH_MX1ADS is not set
+# CONFIG_MACH_PIMX1 is not set
+# CONFIG_IMX_APF9328_FLASH_8MB is not set
+CONFIG_IMX_APF9328_FLASH_16MB=y
+# CONFIG_IMX_SCB9328_RAM_16MB is not set
+CONFIG_IMX_SCB9328_RAM_32MB=y
+
+#
+# Processor Type
+#
+CONFIG_CPU_32=y
+CONFIG_CPU_ARM920T=y
+CONFIG_CPU_32v4=y
+CONFIG_CPU_ABRT_EV4T=y
+CONFIG_CPU_CACHE_V4WT=y
+CONFIG_CPU_CACHE_VIVT=y
+CONFIG_CPU_COPY_V4WB=y
+CONFIG_CPU_TLB_V4WBI=y
+
+#
+# Processor Features
+#
+CONFIG_ARM_THUMB=y
+# CONFIG_CPU_ICACHE_DISABLE is not set
+# CONFIG_CPU_DCACHE_DISABLE is not set
+# CONFIG_CPU_DCACHE_WRITETHROUGH is not set
+
+#
+# General setup
+#
+CONFIG_ZBOOT_ROM_TEXT=0x0
+CONFIG_ZBOOT_ROM_BSS=0x0
+# CONFIG_XIP_KERNEL is not set
+
+#
+# At least one math emulation must be selected
+#
+CONFIG_FPE_NWFPE=y
+CONFIG_FPE_NWFPE_XP=y
+CONFIG_FPE_FASTFPE=y
+CONFIG_BINFMT_ELF=y
+# CONFIG_BINFMT_AOUT is not set
+# CONFIG_BINFMT_MISC is not set
+
+#
+# Generic Driver Options
+#
+CONFIG_STANDALONE=y
+CONFIG_PREVENT_FIRMWARE_BUILD=y
+# CONFIG_PM is not set
+CONFIG_PREEMPT=y
+# CONFIG_ARTHUR is not set
+CONFIG_CMDLINE=""
+# CONFIG_LEDS is not set
+CONFIG_ALIGNMENT_TRAP=y
+
+#
+# Parallel port support
+#
+# CONFIG_PARPORT is not set
+
+#
+# Memory Technology Devices (MTD)
+#
+CONFIG_MTD=y
+CONFIG_MTD_DEBUG=y
+CONFIG_MTD_DEBUG_VERBOSE=3
+CONFIG_MTD_PARTITIONS=y
+# CONFIG_MTD_CONCAT is not set
+# CONFIG_MTD_REDBOOT_PARTS is not set
+CONFIG_MTD_CMDLINE_PARTS=y
+CONFIG_MTD_AFS_PARTS=y
+
+#
+# User Modules And Translation Layers
+#
+CONFIG_MTD_CHAR=y
+CONFIG_MTD_BLOCK=y
+# CONFIG_FTL is not set
+# CONFIG_NFTL is not set
+# CONFIG_INFTL is not set
+
+#
+# RAM/ROM/Flash chip drivers
+#
+CONFIG_MTD_CFI=y
+# CONFIG_MTD_JEDECPROBE is not set
+CONFIG_MTD_GEN_PROBE=y
+# CONFIG_MTD_CFI_ADV_OPTIONS is not set
+CONFIG_MTD_MAP_BANK_WIDTH_1=y
+CONFIG_MTD_MAP_BANK_WIDTH_2=y
+CONFIG_MTD_MAP_BANK_WIDTH_4=y
+# CONFIG_MTD_MAP_BANK_WIDTH_8 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_16 is not set
+# CONFIG_MTD_MAP_BANK_WIDTH_32 is not set
+CONFIG_MTD_CFI_I1=y
+CONFIG_MTD_CFI_I2=y
+# CONFIG_MTD_CFI_I4 is not set
+# CONFIG_MTD_CFI_I8 is not set
+CONFIG_MTD_CFI_INTELEXT=y
+# CONFIG_MTD_CFI_AMDSTD is not set
+# CONFIG_MTD_CFI_STAA is not set
+CONFIG_MTD_CFI_UTIL=y
+# CONFIG_MTD_RAM is not set
+# CONFIG_MTD_ROM is not set
+# CONFIG_MTD_ABSENT is not set
+# CONFIG_MTD_XIP is not set
+
+#
+# Mapping drivers for chip access
+#
+CONFIG_MTD_COMPLEX_MAPPINGS=y
+# CONFIG_MTD_PHYSMAP is not set
+# CONFIG_MTD_ARM_INTEGRATOR is not set
+# CONFIG_MTD_SCB9328 is not set
+# CONFIG_MTD_PIMX1 is not set
+# CONFIG_MTD_MX1FS2 is not set
+# CONFIG_MTD_MX1ADS is not set
+CONFIG_MTD_APF9328=y
+# CONFIG_MTD_EDB7312 is not set
+
+#
+# Self-contained MTD device drivers
+#
+# CONFIG_MTD_SLRAM is not set
+# CONFIG_MTD_PHRAM is not set
+# CONFIG_MTD_MTDRAM is not set
+# CONFIG_MTD_BLKMTD is not set
+# CONFIG_MTD_BLOCK2MTD is not set
+
+#
+# Disk-On-Chip Device Drivers
+#
+# CONFIG_MTD_DOC2000 is not set
+# CONFIG_MTD_DOC2001 is not set
+# CONFIG_MTD_DOC2001PLUS is not set
+
+#
+# NAND Flash Device Drivers
+#
+# CONFIG_MTD_NAND is not set
+
+#
+# Plug and Play support
+#
+
+#
+# Block devices
+#
+# CONFIG_BLK_DEV_FD is not set
+CONFIG_BLK_DEV_LOOP=y
+# CONFIG_BLK_DEV_CRYPTOLOOP is not set
+CONFIG_BLK_DEV_NBD=m
+CONFIG_BLK_DEV_RAM=y
+CONFIG_BLK_DEV_RAM_COUNT=1
+CONFIG_BLK_DEV_RAM_SIZE=4096
+CONFIG_BLK_DEV_INITRD=y
+CONFIG_INITRAMFS_SOURCE=""
+# CONFIG_CDROM_PKTCDVD is not set
+
+#
+# IO Schedulers
+#
+CONFIG_IOSCHED_NOOP=y
+# CONFIG_IOSCHED_AS is not set
+CONFIG_IOSCHED_DEADLINE=y
+CONFIG_IOSCHED_CFQ=y
+
+#
+# Multi-device support (RAID and LVM)
+#
+# CONFIG_MD is not set
+
+#
+# Networking support
+#
+CONFIG_NET=y
+
+#
+# Networking options
+#
+CONFIG_PACKET=y
+CONFIG_PACKET_MMAP=y
+# CONFIG_NETLINK_DEV is not set
+CONFIG_UNIX=y
+# CONFIG_NET_KEY is not set
+CONFIG_INET=y
+# CONFIG_IP_MULTICAST is not set
+# CONFIG_IP_ADVANCED_ROUTER is not set
+CONFIG_IP_PNP=y
+CONFIG_IP_PNP_DHCP=y
+CONFIG_IP_PNP_BOOTP=y
+CONFIG_IP_PNP_RARP=y
+# CONFIG_NET_IPIP is not set
+# CONFIG_NET_IPGRE is not set
+# CONFIG_ARPD is not set
+# CONFIG_SYN_COOKIES is not set
+# CONFIG_INET_AH is not set
+# CONFIG_INET_ESP is not set
+# CONFIG_INET_IPCOMP is not set
+# CONFIG_INET_TUNNEL is not set
+CONFIG_IP_TCPDIAG=y
+# CONFIG_IP_TCPDIAG_IPV6 is not set
+# CONFIG_IPV6 is not set
+# CONFIG_NETFILTER is not set
+
+#
+# SCTP Configuration (EXPERIMENTAL)
+#
+# CONFIG_IP_SCTP is not set
+# CONFIG_ATM is not set
+# CONFIG_BRIDGE is not set
+# CONFIG_VLAN_8021Q is not set
+# CONFIG_DECNET is not set
+# CONFIG_LLC2 is not set
+# CONFIG_IPX is not set
+# CONFIG_ATALK is not set
+# CONFIG_X25 is not set
+# CONFIG_LAPB is not set
+# CONFIG_NET_DIVERT is not set
+# CONFIG_ECONET is not set
+# CONFIG_WAN_ROUTER is not set
+
+#
+# QoS and/or fair queueing
+#
+# CONFIG_NET_SCHED is not set
+# CONFIG_NET_CLS_ROUTE is not set
+
+#
+# Network testing
+#
+# CONFIG_NET_PKTGEN is not set
+# CONFIG_NETPOLL is not set
+# CONFIG_NET_POLL_CONTROLLER is not set
+# CONFIG_HAMRADIO is not set
+# CONFIG_IRDA is not set
+# CONFIG_BT is not set
+CONFIG_NETDEVICES=y
+# CONFIG_DUMMY is not set
+# CONFIG_BONDING is not set
+# CONFIG_EQUALIZER is not set
+# CONFIG_TUN is not set
+
+#
+# Ethernet (10 or 100Mbit)
+#
+CONFIG_NET_ETHERNET=y
+CONFIG_MII=y
+# CONFIG_SMC91X is not set
+CONFIG_DM9000=y
+
+#
+# Ethernet (1000 Mbit)
+#
+
+#
+# Ethernet (10000 Mbit)
+#
+
+#
+# Token Ring devices
+#
+
+#
+# Wireless LAN (non-hamradio)
+#
+# CONFIG_NET_RADIO is not set
+
+#
+# Wan interfaces
+#
+# CONFIG_WAN is not set
+# CONFIG_PPP is not set
+# CONFIG_SLIP is not set
+# CONFIG_SHAPER is not set
+# CONFIG_NETCONSOLE is not set
+
+#
+# SCSI device support
+#
+# CONFIG_SCSI is not set
+
+#
+# Fusion MPT device support
+#
+
+#
+# IEEE 1394 (FireWire) support
+#
+
+#
+# I2O device support
+#
+
+#
+# ISDN subsystem
+#
+# CONFIG_ISDN is not set
+
+#
+# Input device support
+#
+CONFIG_INPUT=y
+
+#
+# Userland interfaces
+#
+# CONFIG_INPUT_MOUSEDEV is not set
+# CONFIG_INPUT_JOYDEV is not set
+# CONFIG_INPUT_TSDEV is not set
+# CONFIG_INPUT_EVDEV is not set
+# CONFIG_INPUT_EVBUG is not set
+
+#
+# Input I/O drivers
+#
+# CONFIG_GAMEPORT is not set
+CONFIG_SOUND_GAMEPORT=y
+# CONFIG_SERIO is not set
+
+#
+# Input Device Drivers
+#
+# CONFIG_INPUT_KEYBOARD is not set
+# CONFIG_INPUT_MOUSE is not set
+# CONFIG_INPUT_JOYSTICK is not set
+# CONFIG_INPUT_TOUCHSCREEN is not set
+# CONFIG_INPUT_MISC is not set
+
+#
+# Character devices
+#
+CONFIG_VT=y
+CONFIG_VT_CONSOLE=y
+CONFIG_HW_CONSOLE=y
+# CONFIG_SERIAL_NONSTANDARD is not set
+
+#
+# Serial drivers
+#
+# CONFIG_SERIAL_8250 is not set
+
+#
+# Non-8250 serial port support
+#
+CONFIG_SERIAL_IMX=y
+CONFIG_SERIAL_IMX_CONSOLE=y
+CONFIG_SERIAL_CORE=y
+CONFIG_SERIAL_CORE_CONSOLE=y
+CONFIG_UNIX98_PTYS=y
+# CONFIG_LEGACY_PTYS is not set
+
+#
+# IPMI
+#
+# CONFIG_IPMI_HANDLER is not set
+
+#
+# Watchdog Cards
+#
+# CONFIG_WATCHDOG is not set
+# CONFIG_NVRAM is not set
+CONFIG_RTC=m
+# CONFIG_DTLK is not set
+# CONFIG_R3964 is not set
+
+#
+# Ftape, the floppy tape device driver
+#
+# CONFIG_DRM is not set
+# CONFIG_RAW_DRIVER is not set
+
+#
+# I2C support
+#
+CONFIG_I2C=m
+CONFIG_I2C_CHARDEV=m
+
+#
+# I2C Algorithms
+#
+# CONFIG_I2C_ALGOBIT is not set
+# CONFIG_I2C_ALGOPCF is not set
+# CONFIG_I2C_ALGOPCA is not set
+
+#
+# I2C Hardware Bus support
+#
+# CONFIG_I2C_ISA is not set
+# CONFIG_I2C_PARPORT_LIGHT is not set
+# CONFIG_I2C_STUB is not set
+# CONFIG_I2C_PCA_ISA is not set
+# CONFIG_I2C_IMX is not set
+
+#
+# Hardware Sensors Chip support
+#
+# CONFIG_I2C_SENSOR is not set
+# CONFIG_SENSORS_ADM1021 is not set
+# CONFIG_SENSORS_ADM1025 is not set
+# CONFIG_SENSORS_ADM1026 is not set
+# CONFIG_SENSORS_ADM1031 is not set
+# CONFIG_SENSORS_ASB100 is not set
+# CONFIG_SENSORS_DS1621 is not set
+# CONFIG_SENSORS_FSCHER is not set
+# CONFIG_SENSORS_FSCPOS is not set
+# CONFIG_SENSORS_GL518SM is not set
+# CONFIG_SENSORS_GL520SM is not set
+# CONFIG_SENSORS_IT87 is not set
+# CONFIG_SENSORS_LM63 is not set
+# CONFIG_SENSORS_LM75 is not set
+# CONFIG_SENSORS_LM77 is not set
+# CONFIG_SENSORS_LM78 is not set
+# CONFIG_SENSORS_LM80 is not set
+# CONFIG_SENSORS_LM83 is not set
+# CONFIG_SENSORS_LM85 is not set
+# CONFIG_SENSORS_LM87 is not set
+# CONFIG_SENSORS_LM90 is not set
+# CONFIG_SENSORS_LM92 is not set
+# CONFIG_SENSORS_MAX1619 is not set
+# CONFIG_SENSORS_PC87360 is not set
+# CONFIG_SENSORS_SMSC47B397 is not set
+# CONFIG_SENSORS_SMSC47M1 is not set
+# CONFIG_SENSORS_W83781D is not set
+# CONFIG_SENSORS_W83L785TS is not set
+# CONFIG_SENSORS_W83627HF is not set
+
+#
+# Other I2C Chip support
+#
+# CONFIG_SENSORS_DS1337 is not set
+# CONFIG_SENSORS_EEPROM is not set
+# CONFIG_SENSORS_PCF8574 is not set
+# CONFIG_SENSORS_PCF8591 is not set
+# CONFIG_SENSORS_RTC8564 is not set
+CONFIG_I2C_DEBUG_CORE=y
+# CONFIG_I2C_DEBUG_ALGO is not set
+# CONFIG_I2C_DEBUG_BUS is not set
+# CONFIG_I2C_DEBUG_CHIP is not set
+
+#
+# Multimedia devices
+#
+# CONFIG_VIDEO_DEV is not set
+
+#
+# Digital Video Broadcasting Devices
+#
+# CONFIG_DVB is not set
+
+#
+# File systems
+#
+CONFIG_EXT2_FS=y
+# CONFIG_EXT2_FS_XATTR is not set
+# CONFIG_EXT3_FS is not set
+# CONFIG_JBD is not set
+# CONFIG_REISERFS_FS is not set
+# CONFIG_JFS_FS is not set
+# CONFIG_XFS_FS is not set
+# CONFIG_MINIX_FS is not set
+# CONFIG_ROMFS_FS is not set
+# CONFIG_QUOTA is not set
+CONFIG_DNOTIFY=y
+# CONFIG_AUTOFS_FS is not set
+# CONFIG_AUTOFS4_FS is not set
+
+#
+# CD-ROM/DVD Filesystems
+#
+# CONFIG_ISO9660_FS is not set
+# CONFIG_UDF_FS is not set
+
+#
+# DOS/FAT/NT Filesystems
+#
+CONFIG_FAT_FS=m
+# CONFIG_MSDOS_FS is not set
+CONFIG_VFAT_FS=m
+CONFIG_FAT_DEFAULT_CODEPAGE=437
+CONFIG_FAT_DEFAULT_IOCHARSET="iso8859-1"
+# CONFIG_NTFS_FS is not set
+
+#
+# Pseudo filesystems
+#
+CONFIG_PROC_FS=y
+CONFIG_SYSFS=y
+# CONFIG_DEVFS_FS is not set
+CONFIG_DEVPTS_FS_XATTR=y
+# CONFIG_DEVPTS_FS_SECURITY is not set
+CONFIG_TMPFS=y
+# CONFIG_TMPFS_XATTR is not set
+# CONFIG_HUGETLB_PAGE is not set
+CONFIG_RAMFS=y
+
+#
+# Miscellaneous filesystems
+#
+# CONFIG_ADFS_FS is not set
+# CONFIG_AFFS_FS is not set
+# CONFIG_HFS_FS is not set
+# CONFIG_HFSPLUS_FS is not set
+# CONFIG_BEFS_FS is not set
+# CONFIG_BFS_FS is not set
+# CONFIG_EFS_FS is not set
+# CONFIG_JFFS_FS is not set
+CONFIG_JFFS2_FS=y
+CONFIG_JFFS2_FS_DEBUG=0
+# CONFIG_JFFS2_FS_NAND is not set
+# CONFIG_JFFS2_FS_NOR_ECC is not set
+# CONFIG_JFFS2_COMPRESSION_OPTIONS is not set
+CONFIG_JFFS2_ZLIB=y
+CONFIG_JFFS2_RTIME=y
+# CONFIG_JFFS2_RUBIN is not set
+CONFIG_CRAMFS=y
+# CONFIG_VXFS_FS is not set
+# CONFIG_HPFS_FS is not set
+# CONFIG_QNX4FS_FS is not set
+# CONFIG_SYSV_FS is not set
+# CONFIG_UFS_FS is not set
+
+#
+# Network File Systems
+#
+CONFIG_NFS_FS=y
+CONFIG_NFS_V3=y
+CONFIG_NFS_V4=y
+CONFIG_NFS_DIRECTIO=y
+# CONFIG_NFSD is not set
+CONFIG_LOCKD=y
+CONFIG_LOCKD_V4=y
+# CONFIG_EXPORTFS is not set
+CONFIG_SUNRPC=y
+# CONFIG_RPCSEC_GSS_KRB5 is not set
+# CONFIG_RPCSEC_GSS_SPKM3 is not set
+# CONFIG_SMB_FS is not set
+# CONFIG_CIFS is not set
+# CONFIG_NCP_FS is not set
+# CONFIG_CODA_FS is not set
+# CONFIG_AFS_FS is not set
+
+#
+# Partition Types
+#
+# CONFIG_PARTITION_ADVANCED is not set
+CONFIG_MSDOS_PARTITION=y
+
+#
+# Native Language Support
+#
+CONFIG_NLS=y
+CONFIG_NLS_DEFAULT="iso8859-1"
+# CONFIG_NLS_CODEPAGE_437 is not set
+# CONFIG_NLS_CODEPAGE_737 is not set
+# CONFIG_NLS_CODEPAGE_775 is not set
+# CONFIG_NLS_CODEPAGE_850 is not set
+# CONFIG_NLS_CODEPAGE_852 is not set
+# CONFIG_NLS_CODEPAGE_855 is not set
+# CONFIG_NLS_CODEPAGE_857 is not set
+# CONFIG_NLS_CODEPAGE_860 is not set
+# CONFIG_NLS_CODEPAGE_861 is not set
+# CONFIG_NLS_CODEPAGE_862 is not set
+# CONFIG_NLS_CODEPAGE_863 is not set
+# CONFIG_NLS_CODEPAGE_864 is not set
+# CONFIG_NLS_CODEPAGE_865 is not set
+# CONFIG_NLS_CODEPAGE_866 is not set
+# CONFIG_NLS_CODEPAGE_869 is not set
+# CONFIG_NLS_CODEPAGE_936 is not set
+# CONFIG_NLS_CODEPAGE_950 is not set
+# CONFIG_NLS_CODEPAGE_932 is not set
+# CONFIG_NLS_CODEPAGE_949 is not set
+# CONFIG_NLS_CODEPAGE_874 is not set
+# CONFIG_NLS_ISO8859_8 is not set
+# CONFIG_NLS_CODEPAGE_1250 is not set
+# CONFIG_NLS_CODEPAGE_1251 is not set
+# CONFIG_NLS_ASCII is not set
+# CONFIG_NLS_ISO8859_1 is not set
+# CONFIG_NLS_ISO8859_2 is not set
+# CONFIG_NLS_ISO8859_3 is not set
+# CONFIG_NLS_ISO8859_4 is not set
+# CONFIG_NLS_ISO8859_5 is not set
+# CONFIG_NLS_ISO8859_6 is not set
+# CONFIG_NLS_ISO8859_7 is not set
+# CONFIG_NLS_ISO8859_9 is not set
+# CONFIG_NLS_ISO8859_13 is not set
+# CONFIG_NLS_ISO8859_14 is not set
+# CONFIG_NLS_ISO8859_15 is not set
+# CONFIG_NLS_KOI8_R is not set
+# CONFIG_NLS_KOI8_U is not set
+# CONFIG_NLS_UTF8 is not set
+
+#
+# Profiling support
+#
+# CONFIG_PROFILING is not set
+
+#
+# Graphics support
+#
+CONFIG_FB=y
+# CONFIG_FB_MODE_HELPERS is not set
+# CONFIG_FB_TILEBLITTING is not set
+CONFIG_FB_IMX=y
+# CONFIG_FB_VIRTUAL is not set
+
+#
+# Console display driver support
+#
+# CONFIG_VGA_CONSOLE is not set
+CONFIG_DUMMY_CONSOLE=y
+CONFIG_FRAMEBUFFER_CONSOLE=y
+CONFIG_FONTS=y
+CONFIG_FONT_8x8=y
+CONFIG_FONT_8x16=y
+# CONFIG_FONT_6x11 is not set
+CONFIG_FONT_PEARL_8x8=y
+CONFIG_FONT_ACORN_8x8=y
+# CONFIG_FONT_MINI_4x6 is not set
+# CONFIG_FONT_SUN8x16 is not set
+# CONFIG_FONT_SUN12x22 is not set
+
+#
+# Logo configuration
+#
+CONFIG_LOGO=y
+# CONFIG_LOGO_LINUX_MONO is not set
+# CONFIG_LOGO_LINUX_VGA16 is not set
+# CONFIG_LOGO_LINUX_CLUT224 is not set
+CONFIG_LOGO_ARMADEUS_CLUT224=y
+
+#
+# Sound
+#
+# CONFIG_SOUND is not set
+
+#
+# Misc devices
+#
+
+#
+# USB support
+#
+# CONFIG_USB is not set
+CONFIG_USB_ARCH_HAS_HCD=y
+# CONFIG_USB_ARCH_HAS_OHCI is not set
+
+#
+# NOTE: USB_STORAGE enables SCSI, and 'SCSI disk support' may also be needed; see USB_STORAGE Help for more information
+#
+
+#
+# USB Gadget Support
+#
+# CONFIG_USB_GADGET is not set
+
+#
+# MMC/SD Card support
+#
+# CONFIG_MMC is not set
+
+#
+# Kernel hacking
+#
+# CONFIG_DEBUG_KERNEL is not set
+# CONFIG_DEBUG_INFO is not set
+CONFIG_FRAME_POINTER=y
+# CONFIG_DEBUG_USER is not set
+
+#
+# Security options
+#
+# CONFIG_KEYS is not set
+# CONFIG_SECURITY is not set
+
+#
+# Cryptographic options
+#
+CONFIG_CRYPTO=y
+# CONFIG_CRYPTO_HMAC is not set
+# CONFIG_CRYPTO_NULL is not set
+# CONFIG_CRYPTO_MD4 is not set
+# CONFIG_CRYPTO_MD5 is not set
+# CONFIG_CRYPTO_SHA1 is not set
+# CONFIG_CRYPTO_SHA256 is not set
+# CONFIG_CRYPTO_SHA512 is not set
+# CONFIG_CRYPTO_WP512 is not set
+# CONFIG_CRYPTO_DES is not set
+# CONFIG_CRYPTO_BLOWFISH is not set
+# CONFIG_CRYPTO_TWOFISH is not set
+# CONFIG_CRYPTO_SERPENT is not set
+# CONFIG_CRYPTO_AES is not set
+# CONFIG_CRYPTO_CAST5 is not set
+# CONFIG_CRYPTO_CAST6 is not set
+# CONFIG_CRYPTO_TEA is not set
+# CONFIG_CRYPTO_ARC4 is not set
+# CONFIG_CRYPTO_KHAZAD is not set
+# CONFIG_CRYPTO_ANUBIS is not set
+# CONFIG_CRYPTO_DEFLATE is not set
+# CONFIG_CRYPTO_MICHAEL_MIC is not set
+# CONFIG_CRYPTO_CRC32C is not set
+# CONFIG_CRYPTO_TEST is not set
+
+#
+# Library routines
+#
+# CONFIG_CRC_CCITT is not set
+CONFIG_CRC32=y
+# CONFIG_LIBCRC32C is not set
+CONFIG_ZLIB_INFLATE=y
+CONFIG_ZLIB_DEFLATE=y
--- linux-2.6.23.1.1/arch/arm/mach-imx/apf9328.c	1970-01-01 01:00:00.000000000 +0100
+++ linux-2.6.23.1.1.mod/arch/arm/mach-imx/apf9328.c	2008-04-01 16:15:37.000000000 +0200
@@ -0,0 +1,543 @@
+/*
+ * linux/arch/arm/mach-imx/apf9328.c
+ *
+ * Copyright (c) 2005 Armadeus
+ * This work is based on scb9328.c from Sascha Hauer
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ */
+
+#include <linux/device.h>
+#include <linux/init.h>
+#include <linux/interrupt.h>
+#include <linux/serial_8250.h>
+#include <linux/spi/spi.h>
+#include <linux/spi/tsc2102.h>
+#include "../../../drivers/net/can/mcp251x.h"
+
+#include <asm/system.h>
+#include <asm/hardware.h>
+#include <linux/irq.h>
+#include <asm/pgtable.h>
+#include <asm/page.h>
+
+#include <asm/mach/map.h>
+#include <asm/mach-types.h>
+#include <asm/mach/arch.h>
+#include <asm/arch/imx-uart.h>
+#include <asm/arch/mmc.h>
+#include <asm/arch/spi_imx.h>
+#include <asm/arch/imx-regs.h> // imx_gpio_mode()
+
+#ifdef CONFIG_DM9000
+#include <linux/dm9000.h>
+#endif // CONFIG_DM9000
+
+#include "generic.h"
+
+#ifdef CONFIG_SENSORS_MAX1027_MODULE
+#define CONFIG_SENSORS_MAX1027 1
+#endif
+#ifdef CONFIG_SPI_IMX_MODULE
+#define CONFIG_SPI_IMX 1
+#endif
+#ifdef CONFIG_SPI_TSC2102_MODULE
+#define CONFIG_SPI_TSC2102 1
+#endif
+#ifdef CONFIG_CAN_MCP251X_MODULE
+#define CONFIG_CAN_MCP251X 1
+#endif
+#ifdef CONFIG_IMX_BACKLIGHT_MODULE
+#define CONFIG_IMX_BACKLIGHT 1
+#endif
+
+// --- ETHERNET RESSOURCE ---
+#ifdef CONFIG_DM9000
+static struct resource dm9000_resources[] = {
+    [0] = {
+        .start  = (APF9328_ETH_PHYS + 0),
+        .end    = (APF9328_ETH_PHYS + 1),
+        .flags  = IORESOURCE_MEM,
+    },
+    [1] = {
+        .start  = (APF9328_ETH_PHYS + 2),
+        .end    = (APF9328_ETH_PHYS + 3),
+        .flags  = IORESOURCE_MEM,
+    },
+    [2] = {
+        .start  = (APF9328_ETH_IRQ),
+        .end    = (APF9328_ETH_IRQ),
+        .flags  = IORESOURCE_IRQ,
+    },
+};
+
+static struct dm9000_plat_data dm9000_setup = {
+    .flags          = DM9000_PLATF_16BITONLY
+};
+
+static struct platform_device dm9000x_device = {
+    .name           = "dm9000",
+    .id             = 0,
+    .num_resources  = ARRAY_SIZE(dm9000_resources),
+    .resource       = dm9000_resources,
+    .dev            = { .platform_data = &dm9000_setup, },
+};
+#endif // CONFIG_DM9000
+
+// --- PWM RESSOURCE ---
+// I don't think it needs an ifdef - JB
+static struct resource pwm_resources[] = {
+    [0] = {
+        .start  = (IMX_PWM_BASE),
+        .end    = (IMX_PWM_BASE + 0x0C),
+        .flags  = IORESOURCE_MEM,
+    },
+    [1] = {
+        .start  = (PWM_INT),
+        .end    = (PWM_INT),
+        .flags  = IORESOURCE_IRQ,
+    },
+};
+
+static struct platform_device imx_pwm_device = {
+    .name           = "imx-pwm", // Should be the same as the driver name
+    .id             = 0,
+    .num_resources  = ARRAY_SIZE(pwm_resources),
+    .resource       = pwm_resources,
+};
+
+// --- SERIAL RESSOURCE ---
+static struct imxuart_platform_data uart_pdata = {
+    .flags = IMXUART_HAVE_RTSCTS,
+};
+
+static struct resource imx_uart1_resources[] = {
+    [0] = {
+        .start  = 0x00206000,
+        .end    = 0x002060FF,
+        .flags  = IORESOURCE_MEM,
+    },
+    [1] = {
+        .start  = (UART1_MINT_RX),
+        .end    = (UART1_MINT_RX),
+        .flags  = IORESOURCE_IRQ,
+    },
+    [2] = {
+        .start  = (UART1_MINT_TX),
+        .end    = (UART1_MINT_TX),
+        .flags  = IORESOURCE_IRQ,
+},
+};
+
+static struct platform_device imx_uart1_device = {
+    .name           = "imx-uart",
+    .id             = 0,
+    .num_resources  = ARRAY_SIZE(imx_uart1_resources),
+    .resource       = imx_uart1_resources,
+    .dev            = {
+        .platform_data = &uart_pdata,
+    }
+};
+
+static struct resource imx_uart2_resources[] = {
+    [0] = {
+        .start  = 0x00207000,
+        .end    = 0x002070FF,
+        .flags  = IORESOURCE_MEM,
+    },
+    [1] = {
+        .start  = (UART2_MINT_RX),
+        .end    = (UART2_MINT_RX),
+        .flags  = IORESOURCE_IRQ,
+    },
+    [2] = {
+        .start  = (UART2_MINT_TX),
+        .end    = (UART2_MINT_TX),
+        .flags  = IORESOURCE_IRQ,
+    },
+};
+
+static struct platform_device imx_uart2_device = {
+    .name           = "imx-uart",
+    .id             = 1,
+    .num_resources  = ARRAY_SIZE(imx_uart2_resources),
+    .resource       = imx_uart2_resources,
+    .dev            = {
+        .platform_data = &uart_pdata,
+    }
+};
+
+#ifdef CONFIG_SPI_IMX
+static struct resource imx_spi1_resource[] = {
+	[0] = {
+		.start = 0x00213000,
+		.end   = 0x00213fff,
+		.flags = IORESOURCE_MEM,
+	},
+	[1] = {
+		.start = CSPI_INT,
+		.end   = CSPI_INT,
+		.flags = IORESOURCE_IRQ,
+	}
+};
+
+static struct spi_imx_master imx_spi1_master_info = {
+	.num_chipselect	= 1,
+	.enable_dma     = 0,
+};
+
+static struct platform_device imx_spi1 = {
+	.name				= "spi_imx",
+	.id					= 1,
+	.resource			= imx_spi1_resource,
+	.num_resources		= ARRAY_SIZE(imx_spi1_resource),
+	.dev = {
+		.platform_data	= &imx_spi1_master_info,
+	},
+};
+
+static struct resource imx_spi2_resource[] = {
+	[0] = {
+		.start = 0x00219000,
+		.end   = 0x00219fff,
+		.flags = IORESOURCE_MEM,
+	},
+	[1] = {
+		.start = SPI2_INT,
+		.end   = SPI2_INT,
+		.flags = IORESOURCE_IRQ,
+	}
+};
+
+static struct spi_imx_master imx_spi2_master_info = {
+	.num_chipselect	= 1,
+	.enable_dma     = 0,
+};
+
+static struct platform_device imx_spi2 = {
+	.name				= "spi_imx",
+	.id					= 2,
+	.resource			= imx_spi2_resource,
+	.num_resources		= ARRAY_SIZE(imx_spi2_resource),
+	.dev = {
+		.platform_data	= &imx_spi2_master_info,
+	},
+};
+
+#endif //CONFIG_SPI_IMX
+
+#ifdef CONFIG_SENSORS_MAX1027
+#define IMX_SPI1_SS_PIN 15 
+#define IMX_SPI1_SS (1<<15)
+static void max1027_init_cs(void)
+{
+    // SPI CSn is used as chip select but in GPIO mode
+    OCR1(2) |= 3<<(IMX_SPI1_SS_PIN*2);
+    DDIR(2) |= IMX_SPI1_SS;
+    DR(2) |= IMX_SPI1_SS;
+    GIUS(2) |= IMX_SPI1_SS;
+    GIUS(2) &= ~(1<<14 | 1<<16 | 1<< 17); // Set SPI primary functions
+}
+static void max1027_cs(u32 command)
+{
+    if( command == SPI_CS_DEASSERT )
+        DR(2) |= IMX_SPI1_SS;
+    else
+        DR(2) &= ~IMX_SPI1_SS;
+}
+
+static struct spi_imx_chip max1027_hw = {
+	.cs_control		= max1027_cs,
+};
+
+#endif // CONFIG_SENSORS_MAX1027
+
+#ifdef CONFIG_SPI_TSC2102
+#define TSC2102_CS_GPIOB 17
+#define TSC2102_INT_GPIOD 8 
+
+static void tsc2102_init_gpio(void)
+{
+    // Activate SPI2 port ----
+    // PortB 19 is used as chip select (in GPIO mode)
+    DR(1) |= 1 << TSC2102_CS_GPIOB; // Initializes it High
+    imx_gpio_mode( GPIO_PORTB | TSC2102_CS_GPIOB | GPIO_OUT | GPIO_GIUS | GPIO_DR );
+    // Configure SPI2 outputs
+    imx_gpio_mode( PD7_AIN_SPI2_SCLK );
+    imx_gpio_mode( PD10_AIN_SPI2_TXD );
+    imx_gpio_mode( PD9_AOUT_SPI2_RXD );
+    FMCR |= SPI2_RXD_SEL; // RX is AOUT on PORTD
+
+    // PortD 8 is used as PINTDAV interrupt
+    imx_gpio_mode( GPIO_PORTD | TSC2102_INT_GPIOD | GPIO_IN | GPIO_GIUS );
+    //imx_gpio_irq_type( IRQ_GPIOD(8), __IRQT_FALEDGE );
+
+    // Activate SSI on PortC ----
+    imx_gpio_mode( PC3_PF_SSI_RXFS  );
+    FMCR &= ~(SSI_RXFS_SEL);
+    imx_gpio_mode( PC4_PF_SSI_RXCLK );
+    FMCR &= ~(SSI_RXCLK_SEL);
+    imx_gpio_mode( PC5_PF_SSI_RXDAT );
+    FMCR &= ~(SSI_RXDAT_SEL);
+    imx_gpio_mode( PC6_PF_SSI_TXDAT );
+    imx_gpio_mode( PC7_PF_SSI_TXFS  );
+    FMCR &= ~(SSI_TXFS_SEL);
+    imx_gpio_mode( PC8_PF_SSI_TXCLK );
+    FMCR &= ~(SSI_TXCLK_SEL);
+
+    printk("TSC2102 GPIOs initialized\n");
+}
+
+// Chip select command for TSC2102
+static void tsc2102_cs(u32 command)
+{
+    // PortB 19 is used as chip select
+    if( command == SPI_CS_DEASSERT )
+        DR(1) |= 1<< TSC2102_CS_GPIOB;
+    else
+        DR(1) &= ~(1<< TSC2102_CS_GPIOB);
+}
+
+static struct spi_imx_chip tsc2102_hw = {
+    .cs_control		= tsc2102_cs,
+};
+
+static struct tsc2102_config apf9328_tsc2102_config = {
+    .use_internal = 1, // -> use internal voltage reference
+    .monitor = TSC_BAT1 | TSC_AUX | TSC_TEMP,
+    .temp_at25c = 2200,
+/*    .apm_report = palmte_get_power_status,
+    .alsa_config = &palmte_alsa_config,*/
+};
+
+#endif // CONFIG_SPI_TSC2102
+
+#ifdef CONFIG_CAN_MCP251X
+#define CAN_MPC251X_CS_GPIOB 19
+#define CAN_MPC251X_INT_GPIOC 13 
+
+// Chip select command for MCP251X
+static void mcp251X_cs(u32 command)
+{
+    // PortB 19 is used as chip select
+    if( command == SPI_CS_DEASSERT )
+        DR(1) |= 1<< CAN_MPC251X_CS_GPIOB;
+    else
+        DR(1) &= ~(1<< CAN_MPC251X_CS_GPIOB);
+}
+
+static struct spi_imx_chip mcp251X_hw = {
+    .cs_control		= mcp251X_cs,
+};
+
+static void mcp251X_init_gpio(void)
+{
+    // Activate SPI2 port ----
+    // PortB 19 is used as chip select (in GPIO mode)
+    DR(1) |= 1 << CAN_MPC251X_CS_GPIOB; // Initializes it High
+    imx_gpio_mode( GPIO_PORTB | CAN_MPC251X_CS_GPIOB | GPIO_OUT | GPIO_GIUS | GPIO_DR );
+
+    // PortC 13 is used as CAN interrupt
+    imx_gpio_mode( GPIO_PORTC | CAN_MPC251X_INT_GPIOC | GPIO_IN | GPIO_GIUS );
+
+    // Configure SPI2 outputs
+    imx_gpio_mode( PD7_AIN_SPI2_SCLK );
+    imx_gpio_mode( PD10_AIN_SPI2_TXD );
+    imx_gpio_mode( PD9_AOUT_SPI2_RXD );
+    FMCR |= SPI2_RXD_SEL; // RX is AOUT on PORTD
+}
+
+static struct mcp251x_platform_data apf9328_mcp251x_config = {
+ .oscillator_frequency  = 16000000,
+ .board_specific_setup  = NULL,
+ .device_reset          = NULL,
+ .transceiver_enable    = NULL,
+};
+
+#endif 
+
+
+static struct spi_board_info spi_board_info[] __initdata = {
+#ifdef CONFIG_SENSORS_MAX1027
+{
+    .modalias			= "max1027",
+    .controller_data 	= &max1027_hw,
+    .max_speed_hz		= 8000000,
+    .bus_num			= 1, // SPI1
+    .chip_select		= 0,
+    .mode 				= 0,
+},
+#endif // CONFIG_SENSORS_MAX1027
+#ifdef CONFIG_SPI_TSC2102
+{
+    .modalias			= "tsc2102",
+    .controller_data 	= &tsc2102_hw,
+    .max_speed_hz		= 8000000,
+    .bus_num			= 2, // SPI2
+    .irq                = IRQ_GPIOD(TSC2102_INT_GPIOD),
+    .chip_select		= 0,
+    .mode 				= 0,
+    .platform_data      = &apf9328_tsc2102_config,
+},
+#endif // CONFIG_SPI_TSC2102
+#ifdef CONFIG_CAN_MCP251X
+ {
+ .modalias          = "mcp251x",
+ .max_speed_hz      = 8000000, /* 8MHz */
+ .controller_data 	= &mcp251X_hw,
+ .bus_num           = 2,
+ .mode              = SPI_MODE_0,
+ .chip_select       = 0,
+ .irq               = IRQ_GPIOC( CAN_MPC251X_INT_GPIOC ),
+ .platform_data     = &apf9328_mcp251x_config,
+ },
+#endif // CONFIG_CAN_MCP251X
+};
+
+// --- LCD RESSOURCE ---
+#ifdef CONFIG_FB_IMX
+// all custom LCD configuration is deported to this file for clarity purpose:
+#include "apf9328_lcd_config.h"
+#define IMX_FB_PHYS     (0x0C000000 - 0x40000)
+#endif // CONFIG_FB_IMX
+
+#ifdef CONFIG_IMX_BACKLIGHT
+static struct imxbl_machinfo imx_bl_machinfo = {
+    .max_intensity      = 0xff,
+    .default_intensity  = 0x90,
+    .limit_mask         = 0x7f, // When battery is low
+//    set_bl_intensity = put a function here if you want to overload default one,
+};
+//extern struct platform_device imxfb_device; // filled in generic.c
+static struct platform_device imxbl_device = {
+    .name       = "imxl-bl",
+    .dev        = {
+//        .parent = &imxfb_device.dev, crash kernel even if EXPORT_SYMBOL() is done in generic.c
+        .platform_data	= &imx_bl_machinfo,
+    },
+    .id        = 0,
+};
+#endif // CONFIG_IMX_BACKLIGHT
+
+static struct platform_device *devices[] __initdata = {
+    &imx_uart1_device,
+    &imx_uart2_device,
+#ifdef CONFIG_DM9000    
+    &dm9000x_device,
+#endif // CONFIG_DM9000
+#ifdef CONFIG_SPI_IMX
+    &imx_spi1,
+    &imx_spi2,
+#endif //CONFIG_SPI_IMX
+    &imx_pwm_device,
+#ifdef CONFIG_IMX_BACKLIGHT
+    &imxbl_device,
+#endif // CONFIG_IMX_BACKLIGHT
+};
+
+static void __init apf9328_init(void)
+{
+    printk("--- Registering APF9328 ressources\n");
+
+    // Serial
+    /*UFCR(IMX_UART1_BASE) = 0xa81; To be removed
+    UFCR(IMX_UART2_BASE) = 0xa81;*/
+    // LCD
+#ifdef CONFIG_FB_IMX
+    set_imx_fb_info(&apf9328_fb_info);
+    printk("Set apf9328_fb_info\n");
+    // init PORTD ....//
+    imx_fb_set_gpios();
+#endif // CONFIG_FB_IMX
+
+#ifdef CONFIG_SENSORS_MAX1027
+    max1027_init_cs();
+#endif //CONFIG_SENSORS_MAX1027
+#ifdef CONFIG_SPI_TSC2102
+    tsc2102_init_gpio();
+#endif // CONFIG_SPI_TSC2102
+#ifdef CONFIG_CAN_MCP251X
+    mcp251X_init_gpio();
+#endif // CONFIG_CAN_MCP251X
+
+    platform_add_devices(devices, ARRAY_SIZE(devices));
+#if defined (CONFIG_SENSORS_MAX1027) || defined (CONFIG_SPI_TSC2102) || defined (CONFIG_CAN_MCP251X)
+    spi_register_board_info(spi_board_info, ARRAY_SIZE(spi_board_info));
+#endif 
+
+#ifdef CONFIG_ARMADEUS_FPGA_DRIVERS
+    request_mem_region(IMX_CS1_PHYS,IMX_CS1_SIZE,"FPGA");
+#endif // CONFIG_ARMADEUS_FPGA_DRIVERS
+
+    printk("--- APF9328 ressources registered\n");
+}
+
+/*
+ * Register here the memory addresses we want to access from our drivers and
+ * which are not already registerd in generic.c
+ */
+static struct map_desc apf9328_io_desc[] __initdata = {
+#ifdef CONFIG_FB_IMX
+    {
+    .virtual    = IMX_FB_VIRT,
+    .pfn        = __phys_to_pfn(IMX_FB_PHYS),
+    .length     = IMX_FB_SIZE,
+    .type       = MT_DEVICE
+    },
+#endif // CONFIG_FB_IMX
+    // FPGA Memory mapping
+    {.virtual = IMX_CS1_VIRT, .pfn = __phys_to_pfn(IMX_CS1_PHYS), .length = IMX_CS1_SIZE, .type = MT_DEVICE},
+};
+
+void __init apf9328_map_io(void)
+{
+    imx_map_io();
+    iotable_init(apf9328_io_desc, ARRAY_SIZE(apf9328_io_desc));
+}
+
+static void __init apf9328_init_irq(void)
+{
+    // Init generic IRQs
+    imx_init_irq();
+    // Init our custom IRQs
+    set_irq_type(APF9328_UART1_IRQ, IRQF_TRIGGER_LOW);
+#ifdef CONFIG_DM9000
+    set_irq_type(APF9328_ETH_IRQ, IRQF_TRIGGER_LOW);
+#endif // CONFIG_DM9000
+#ifdef CONFIG_SPI_TSC2102
+    set_irq_type( IRQ_GPIOD(TSC2102_INT_GPIOD), IRQF_TRIGGER_FALLING );
+#endif // CONFIG_SPI_TSC2102
+#ifdef CONFIG_CAN_MCP251X
+    set_irq_type( IRQ_GPIOC(CAN_MPC251X_INT_GPIOC), IRQF_TRIGGER_FALLING );
+#endif // CONFIG_CAN_MCP251X
+
+#ifdef CONFIG_ARMADEUS_FPGA_DRIVERS
+#define FPGA_INT_GPIOA 1
+    set_irq_type(IRQ_GPIOA(FPGA_INT_GPIOA),IRQF_TRIGGER_RISING);
+#endif // CONFIG_ARMADEUS_FPGA_DRIVERS
+
+}
+
+
+MACHINE_START(APF9328, "Armadeus APF9328")
+    /* Maintainer: Julien Boibessot, Armadeus */
+    .phys_io      = 0x00200000,
+    .io_pg_offst  = ((0xe0200000) >> 18) & 0xfffc,
+    .boot_params  = 0x08000100,
+    .map_io       = apf9328_map_io,
+    .init_irq     = apf9328_init_irq,
+    .timer        = &imx_timer,
+    .init_machine = apf9328_init,
+MACHINE_END
--- linux-2.6.23.1.1/arch/arm/mach-imx/apf9328_lcd_config.h	1970-01-01 01:00:00.000000000 +0100
+++ linux-2.6.23.1.1.mod/arch/arm/mach-imx/apf9328_lcd_config.h	2007-01-07 21:40:59.000000000 +0100
@@ -0,0 +1,189 @@
+/*
+ *
+ * Armadeus LCD configuration file
+ *
+ * Put here all that is needed to configure the Hardware
+ * interface to your LCD
+ *
+ *
+ */
+
+#ifndef APF9328_LCD_CONFIG_H
+#define APF9328_LCD_CONFIG_H
+
+
+#ifdef CONFIG_FB_IMX
+#include <asm/arch/imxfb.h>
+#include <linux/delay.h>
+
+#define LCD_PORT                    3           /* Port D */
+
+#define OPTREX_F51900_POWER_DOWN    7           /* PD7_REV line */
+#define SHARP_LQ043_POWER_DOWN      12          /* PD12_ACD_OE line */
+#define CONTRAST_LINE               11          /* PD11_CONTRAST */          
+
+#define BACKLIGHT_ON                0x000000ff
+#define DEFAULT_DMA_SETTINGS        (DMACR_BURST | DMACR_HM(8) | DMACR_TM(4))
+
+static void apf9328_lcd_power(int on)
+{
+    pr_debug("apf9328_lcd_power: %s\n", on ? "on":"off");
+#ifdef CONFIG_FB_IMX_OPTREX_F51900_CSTN
+    if(on)
+        DR(LCD_PORT) |= (1 << OPTREX_F51900_POWER_DOWN); 
+    else
+        DR(LCD_PORT) &= ~(1 << OPTREX_F51900_POWER_DOWN); 
+#elif CONFIG_FB_IMX_MICROTIPS_MTF_T035_TFT
+    // No LCD powerdown yet
+#elif CONFIG_FB_IMX_SHARP_LQ043_TFT
+    if(on) {
+        mdelay(200); // at least ten frames have to be processed before 
+                     // enabling the display
+        DR(LCD_PORT) |= (1 << SHARP_LQ043_POWER_DOWN); 
+   }
+    else
+        DR(LCD_PORT) &= ~(1 << SHARP_LQ043_POWER_DOWN); 
+#else
+    if(on)
+        DR(LCD_PORT) &= ~(1 << CONTRAST_LINE);
+    else
+        DR(LCD_PORT) |= (1 << CONTRAST_LINE);
+#endif // CONFIG_FB_IMX_OPTREX_F51900_CSTN
+}
+
+static void apf9328_lcd_backlight_power(int on)
+{
+    if(on)
+        LCDC_PWMR |= BACKLIGHT_ON;
+    else
+        LCDC_PWMR &= ~BACKLIGHT_ON;
+}
+
+#ifdef CONFIG_FB_IMX_SHARP_LQ043_TFT
+static struct imxfb_mach_info apf9328_fb_info __initdata = {
+    .pixclock           = 62500,
+    .bpp                = 16,
+    .xres               = 480,
+    .yres               = 272,
+
+    .hsync_len          = 10,
+    .vsync_len          = 3,
+    .left_margin        = 2,
+    .upper_margin       = 2,
+    .right_margin       = 0,
+    .lower_margin       = 3,
+
+    .pcr                = PCR_TFT | PCR_COLOR | PCR_PBSIZ_8 | PCR_BPIX_16 | PCR_FLMPOL | PCR_LPPOL | 
+                          PCR_CLKPOL | PCR_SCLKIDLE | PCR_SCLK_SEL | PCR_PCD(5),
+    .pwmr               = 0x00000100,    // Contrast with PWM @ Line_Pulse, min by default
+    .dmacr              = DEFAULT_DMA_SETTINGS,
+    .backlight_power    = apf9328_lcd_backlight_power,
+    .lcd_power          = apf9328_lcd_power,
+};
+#elif CONFIG_FB_IMX_MICROTIPS_MTF_T035_TFT
+static struct imxfb_mach_info apf9328_fb_info __initdata = {
+    .pixclock           = 62500,
+    .bpp                = 16,
+    .xres               = 320,
+    .yres               = 240,
+
+    .hsync_len          = 30,
+    .vsync_len          = 3,
+    .left_margin        = 1,
+    .upper_margin       = 20,
+    .right_margin       = 68,
+    .lower_margin       = 20,
+
+    .pcr                = PCR_TFT | PCR_COLOR | PCR_PBSIZ_8 | PCR_BPIX_16 | PCR_FLMPOL | PCR_LPPOL |
+                          PCR_SCLKIDLE | PCR_SCLK_SEL | PCR_PCD(7),
+    .pwmr               = 0x000001ff,    // Contrast with PWM @ Line_Pulse, max by default
+    .dmacr              = DEFAULT_DMA_SETTINGS,
+    .backlight_power    = apf9328_lcd_backlight_power,
+};
+#elif CONFIG_FB_IMX_SHARP_LQ057_TFT
+static struct imxfb_mach_info apf9328_fb_info __initdata = {
+    .pixclock           = 62500,
+    .bpp                = 16,
+    .xres               = 320,
+    .yres               = 240,
+
+    .hsync_len          = 9,
+    .vsync_len          = 2,
+    .left_margin        = 9,
+    .upper_margin       = 0,
+    .right_margin       = 27,
+    .lower_margin       = 7,
+
+    .pcr                = PCR_TFT | PCR_COLOR | PCR_PBSIZ_8 | PCR_BPIX_16 | /*PCR_CLKPOL |*/
+                          PCR_SCLKIDLE | PCR_SCLK_SEL | PCR_PCD(9),
+    .pwmr               = 0,    // No contrast management
+    .dmacr              = DEFAULT_DMA_SETTINGS,
+    .lcd_power          = apf9328_lcd_power,
+};
+#elif CONFIG_FB_IMX_OPTREX_F51900_CSTN
+static struct imxfb_mach_info apf9328_fb_info __initdata = {
+    .pixclock           = 62500,
+    .bpp                = 8,
+    .xres               = 320,
+    .yres               = 240,
+ 
+    .hsync_len          = 2,
+    .vsync_len          = 2,
+    .left_margin        = 2,
+    .upper_margin       = 2,
+    .right_margin       = 2,
+    .lower_margin       = 2,
+ 
+    .pcr                = PCR_COLOR | PCR_PBSIZ_8 | PCR_BPIX_8 | PCR_ACD(5) | 
+                          PCR_END_BYTE_SWAP | PCR_PCD(3),
+    .dmacr              = DEFAULT_DMA_SETTINGS,
+    .lcd_power          = apf9328_lcd_power,
+};
+#elif CONFIG_FB_IMX_MOTOROLA_A910_TFT
+static struct imxfb_mach_info apf9328_fb_info __initdata = {
+    .pixclock           = 62500,
+    .bpp                = 16,
+    .xres               = 240,
+    .yres               = 320,
+
+    .hsync_len          = 9,
+    .vsync_len          = 2,
+    .left_margin        = 9,
+    .upper_margin       = 2,
+    .right_margin       = 27,
+    .lower_margin       = 4,
+
+    .pcr                = PCR_TFT | PCR_COLOR | PCR_PBSIZ_8 | PCR_BPIX_16 | PCR_CLKPOL | 
+                          PCR_SCLKIDLE | PCR_SCLK_SEL | PCR_PCD(9),
+    .dmacr              = DEFAULT_DMA_SETTINGS,
+    .pwmr               = 0,    // No contrast management
+    .lcd_power          = apf9328_lcd_power,
+};
+#else
+#error Please define a imxfb_mach_info structure with your LCD parameters here
+#endif 
+
+static void imx_fb_set_gpios(void)
+{
+
+#ifdef CONFIG_FB_IMX_OPTREX_F51900_CSTN
+    DR(LCD_PORT) |= (1 << OPTREX_F51900_POWER_DOWN); // Initializes it High
+    imx_gpio_mode( GPIO_PORTD | OPTREX_F51900_POWER_DOWN | GPIO_OUT | GPIO_DR );    
+#else
+    DR(LCD_PORT) &= ~(1 << CONTRAST_LINE); // Initializes it low
+    // GPIO Function for CONTRAST pin (changed in imxfb if contrast is activated)
+    imx_gpio_mode( GPIO_PORTD | CONTRAST_LINE | GPIO_OUT | GPIO_GIUS | GPIO_DR ); 
+#endif
+
+#ifdef CONFIG_FB_IMX_SHARP_LQ043_TFT 
+    // ACD_OE (SHARP_LQ043_POWER_DOWN) used as power down signal
+    DR(LCD_PORT) &= ~(1 << SHARP_LQ043_POWER_DOWN); // Initializes it Low
+    imx_gpio_mode( GPIO_PORTD | SHARP_LQ043_POWER_DOWN | GPIO_OUT | GPIO_GIUS | GPIO_DR ); 
+#else
+    // otherwise use ACD_OE as standard LCD controller signal
+    imx_gpio_mode(PD12_PF_ACD_OE);
+#endif // CONFIG_FB_IMX_SHARP_LQ043_TFT
+}
+#endif // CONFIG_FB_IMX
+
+#endif // APF9328_LCD_CONFIG_H
--- ref/linux-2.6.23.1/arch/arm/mach-imx/Kconfig	2006-10-12 22:37:14.000000000 +0200
+++ linux-2.6.23.1/arch/arm/mach-imx/Kconfig	2006-10-07 20:09:07.000000000 +0200
@@ -1,6 +1,10 @@
 menu "IMX Implementations"
 	depends on ARCH_IMX
-
+    
+choice
+    prompt "Development board selection"
+    depends on ARCH_IMX
+    
 config ARCH_MX1ADS
 	bool "mx1ads"
 	depends on ARCH_IMX
@@ -20,6 +24,14 @@ config MACH_SCB9328
 	help
 	  Say Y here if you are using the Synertronixx scb9328 board
 
+config MACH_APF9328
+    bool "apf9328"
+    depends on ARCH_IMX
+    help
+      Say Yes here if you are using the Armadeus APF9328 development board
+
+endchoice
+
 choice
        prompt "SCB9328 eval board"
        depends on MACH_SCB9328
@@ -39,4 +51,30 @@ config IMX_SCB9328_EVK9328L
 
 endchoice
 
+choice
+       prompt "APF9328 Flash available"
+       depends on MACH_APF9328
+       default IMX_APF9328_FLASH_16MB
+
+config IMX_APF9328_FLASH_8MB
+       bool "8MB"
+
+config IMX_APF9328_FLASH_16MB
+       bool "16MB"
+
+endchoice
+
+choice
+       prompt "APF9328 RAM available"
+       depends on MACH_APF9328
+       default IMX_APF9328_RAM_32MB
+
+config IMX_SCB9328_RAM_16MB
+       bool "16MB"
+
+config IMX_SCB9328_RAM_32MB
+       bool "32MB"
+
+endchoice
+
 endmenu
--- ref/linux-2.6.23.1/arch/arm/mach-imx/Makefile	2006-10-12 22:37:14.000000000 +0200
+++ linux-2.6.23.1/arch/arm/mach-imx/Makefile	2006-10-07 20:09:07.000000000 +0200
@@ -13,6 +13,7 @@ obj-y			+= irq.o time.o dma.o generic.o
 obj-$(CONFIG_ARCH_MX1ADS) += mx1ads.o
 obj-$(CONFIG_MACH_MX1FS2) += mx1fs2.o
 obj-$(CONFIG_MACH_SCB9328) += scb9328.o
+obj-$(CONFIG_MACH_APF9328) += apf9328.o
 
 # Support for blinky lights
 led-y := leds.o
--- ref/linux-2.6.23.1/arch/arm/mach-imx/Makefile.boot	2006-10-12 22:37:14.000000000 +0200
+++ linux-2.6.23.1/arch/arm/mach-imx/Makefile.boot	2006-10-07 20:09:07.000000000 +0200
@@ -1,3 +1,4 @@
     zreladdr-$(CONFIG_ARCH_MX1ADS)	:= 0x08008000
     zreladdr-$(CONFIG_MACH_MX1FS2)	:= 0x08008000
     zreladdr-$(CONFIG_MACH_SCB9328)	:= 0x08008000
+    zreladdr-$(CONFIG_MACH_APF9328) := 0x08008000
\ No newline at end of file
--- ref/linux-2.6.23.1/include/asm-arm/arch-imx/apf9328.h	1970-01-01 01:00:00.000000000 +0100
+++ linux-2.6.23.1/include/asm-arm/arch-imx/apf9328.h	2006-10-07 20:09:07.000000000 +0200
@@ -0,0 +1,60 @@
+/*
+ * linux/include/asm-arm/arch-imx/apf9328.h
+ *
+ * Copyright (c) 2005 Armadeus
+ * This work is based on scb9328.h from Sascha Hauer
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ */
+
+#ifndef __ASM_ARCH_APF9328_H
+#define __ASM_ARCH_APF9328_H
+
+/* ------------------------------------------------------------------------ */
+/* Memory Map for the APF9328 Board                                         */
+/* ------------------------------------------------------------------------ */
+
+// Serial ports
+#define APF9328_UART1_VIRT  ( IMX_CS3_VIRT + 0x30000 )
+#define APF9328_UART1_PHYS  ( IMX_CS3_PHYS + 0x30000 )
+#define APF9328_UART1_IRQ   ( IRQ_GPIOA(1) )
+#define APF9328_UART2_VIRT  ( IMX_CS3_VIRT + 0x10000 )
+#define APF9328_UART2_PHYS  ( IMX_CS3_PHYS + 0x10000 )
+#define APF9328_UART2_IRQ   ( IRQ_GPIOA(1) )
+
+// Ethernet
+#define APF9328_ETH_VIRT ( IMX_CS4_VIRT + 0x00C00000 )
+#define APF9328_ETH_PHYS ( IMX_CS4_PHYS + 0x00C00000 )
+#define APF9328_ETH_IRQ  ( IRQ_GPIOB(14) )
+
+// FLASH
+#define APF9328_FLASH_PHYS      IMX_CS0_PHYS
+#ifdef CONFIG_IMX_APF9328_FLASH_8MB
+# define APF9328_FLASH_SIZE     0x00800000
+#endif
+#ifdef CONFIG_IMX_APF9328_FLASH_16MB
+# define APF9328_FLASH_SIZE     0x01000000
+#endif
+#define APF9328_FLASH_BASE      IMX_CS0_VIRT
+
+// RAM
+// Usefull ?
+
+// FPGA
+// TBDL
+
+#define CLK32 32768
+
+#endif // __ASM_ARCH_APF9328_H
--- ref/linux-2.6.23.1/include/asm-arm/arch-imx/hardware.h	2006-10-12 22:37:14.000000000 +0200
+++ linux-2.6.23.1/include/asm-arm/arch-imx/hardware.h	2006-10-07 20:09:07.000000000 +0200
@@ -107,4 +107,8 @@ extern unsigned int imx_get_usb_clk(void
 #include "scb9328.h"
 #endif
 
+#ifdef CONFIG_MACH_APF9328
+#include "apf9328.h"
+#endif
+
 #endif
