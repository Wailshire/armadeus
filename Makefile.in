#
# Defines all important paths to ease sub-systems compilation.
# !! Don't forget to define ARMADEUS_BASE_DIR relatively to your
# calling directory before including this file !!
#

ifeq ($(ARMADEUS_BASE_DIR),)
ARMADEUS_BASE_DIR=$(shell pwd)
endif

BUILDROOT_DIR=$(ARMADEUS_BASE_DIR)/buildroot
-include $(BUILDROOT_DIR)/.config

ARMADEUS_LINUX_VERSION:=$(shell echo $(BR2_LINUX26_VERSION))
ARMADEUS_U_BOOT_VERSION:=$(shell grep "U_BOOT_VERSION:=" $(BUILDROOT_DIR)/target/u-boot/Makefile.in 2>/dev/null | cut -d = -f 2)
ARMADEUS_BOARD_NAME:=$(shell echo $(BR2_BOARD_NAME))
ARMADEUS_PROJECT_NAME:=$(shell echo $(BR2_PROJECT))
ARMADEUS_TARGET_ARCH:=$(shell echo $(BR2_GCC_TARGET_ARCH))
ARMADEUS_UCLIBC_VERSION:=0.9.29

ARMADEUS_SDL_VERSION:=$(shell grep "SDL_VERSION:=" $(BUILDROOT_DIR)/package/sdl/sdl.mk 2>/dev/null | cut -d = -f 2)
ifeq ($(ARMADEUS_SDL_VERSION),)
ARMADEUS_SDL_VERSION:=SDL_NOT_INSTALLED
endif

ARMADEUS_PATCH_DIR=patches
ARMADEUS_LINUX_DIR=$(BUILDROOT_DIR)/project_build_$(ARMADEUS_TARGET_ARCH)/$(ARMADEUS_PROJECT_NAME)/linux-$(ARMADEUS_LINUX_VERSION)
ARMADEUS_LINUX_PATCH_DIR=$(BUILDROOT_DIR)/target/device/armadeus/linux/kernel-patches/$(ARMADEUS_LINUX_VERSION)
ARMADEUS_U_BOOT_DIR=$(BUILDROOT_DIR)/project_build_$(ARMADEUS_TARGET_ARCH)/$(ARMADEUS_PROJECT_NAME)/u-boot-$(ARMADEUS_U_BOOT_VERSION)
ARMADEUS_UCLIBC_DIR=$(BUILDROOT_DIR)/toolchain_build_$(ARMADEUS_TARGET_ARCH)/uClibc-$(ARMADEUS_UCLIBC_VERSION)
ARMADEUS_BOARD_DIR=$(BUILDROOT_DIR)/target/device/armadeus/$(ARMADEUS_BOARD_NAME)/
ARMADEUS_ROOTFS_DIR=$(BUILDROOT_DIR)/project_build_$(ARMADEUS_TARGET_ARCH)/$(ARMADEUS_PROJECT_NAME)/root
ARMADEUS_BINARIES=$(BUILDROOT_DIR)/binaries/$(ARMADEUS_PROJECT_NAME)
ARMADEUS_ROOTFS_TAR=$(ARMADEUS_BINARIES)/$(ARMADEUS_BOARD_NAME)-rootfs.arm.tar
ARMADEUS_STAGING_DIR=$(BUILDROOT_DIR)/build_$(ARMADEUS_TARGET_ARCH)/staging_dir
ARMADEUS_TOOLCHAIN_PATH=$(ARMADEUS_STAGING_DIR)/usr/bin

ARMADEUS_BUILD_DIR=$(BUILDROOT_DIR)/build_$(ARMADEUS_TARGET_ARCH)
ARMADEUS_SDL_DIR=$(ARMADEUS_BUILD_DIR)/SDL-$(ARMADEUS_SDL_VERSION)
